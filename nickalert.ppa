; #= ppalert -rs
; ########################################
; Peace and Protection
; Nickalert addon (standard addon)
; ########################################

#.ppa.info off
[addon]
name=NickAlert
group=Extra
popup=NickAlert
author=iCEhOT modified by acvxqs
version=1.01
url=http://www.pairc.com
email=icehot@gmx.co.uk
ppver=4.20
id=ppalert
[files]
1=nickalert.ppa
[notes]
1=This addon sends a msg to the currently active window informing you when someone mentions your nick, if you are not viewing that channel already...
[menu]
1=$iif($_cfgx(nickalert,enabled),$style(1)) Enabled:nickalert $_tf2o($_not($_cfgx(nickalert,enabled)))
#.ppa.info end

alias rpunct { return $replace($strip($1-,burc),$chr(33),$chr(32),$chr(34),$chr(32),$chr(39),$chr(32),$chr(40),$chr(32),$chr(41),$chr(32),$chr(44),$chr(32),$chr(45),$chr(32),$chr(46),$chr(32),$chr(47),$chr(32),$chr(58),$chr(32),$chr(59),$chr(32),$chr(60),$chr(32),$chr(62),$chr(32),$chr(63),$chr(32),$chr(92),$chr(32),$chr(93),$chr(32),$chr(94),$chr(32),$chr(95),$chr(32),$chr(96),$chr(32),$chr(123),$chr(32),$chr(124),$chr(32),$chr(125),$chr(32)) }

alias nickalert {
  if ($1) _cfgxw nickalert enabled $_o2tf($1)
  dispa NickAlert is $:t($_tf2o($_cfgx(nickalert,enabled)))
}

on *:text:*:#:{
  if (($active != $chan) && ($_cfgx(nickalert,enabled))) {
    if ($istok($replace($rpunct($1-),$rpunct($me),$me),$me,32) == $true) { disp  $+ $chr(91) $+  $+  $+ $:c2 $+ $nick ( $+ $chan $+ ) $+  $+ $chr(3) $+ $chr(93) $+ $+ $chr(58) $+  $+  $+ $colour(text) $1- }
  }
}

on *:action:*:#:{
  if (($active != $chan) && ($_cfgx(nickalert,enabled))) {
    if ($istok($replace($rpunct($1-),$rpunct($me),$me),$me,32) == $true) { disp  $+ $colour(action) $+ *  $+ $chr(91) $+  $+ $nick ( $+ $chan $+ ) $+  $+ $chr(93) $+  $1- }
  }
}